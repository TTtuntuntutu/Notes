## æ–‡æœ¬æˆªæ–­

### è§†è§‰æ•ˆæœæ·»åŠ ...åç¼€

æ–‡æœ¬æˆªæ–­ï¼Œé‡åˆ°çš„åœºæ™¯æœ‰å•è¡Œå’Œå¤šè¡Œï¼Œä¸€èˆ¬è¿˜æ˜¯å•è¡Œå±…å¤šã€‚

å¤„ç†çš„æ–¹æ³•ï¼Œä¹Ÿåˆ†JavaScripå’ŒCSSä¸¤ç±»ã€‚



æˆ‘ä»¬æ¥ç»†ç»†çœ‹ä¸‹ğŸ‘€

#### JavaScriptæ–¹æ³•

##### å¤„ç†å•è¡Œ

JavaScriptæ–¹æ³•å¤„ç†å•è¡Œæ–‡æœ¬æº¢å‡ºï¼Œæ˜¯æœ€æœ€åŸºæœ¬çš„ã€‚

å®ƒé¦–å…ˆæ˜¯æ ¹æ®å•è¡Œå®½åº¦ï¼Œè®¾å®šä¸€ä¸ª æ ‡å‡†å­—é•¿ï¼Œå’Œ æˆ‘ä»¬ç›®æ ‡çš„æ–‡æœ¬å­—é•¿åšæ¯”è¾ƒï¼Œåˆ¤æ–­æ–‡æœ¬æœ‰æ²¡æœ‰æº¢å‡ºã€‚



æ“ä½œçš„æ˜¯`str#length`ã€‚

ä¼˜åŠ¿åœ¨äºç®€ä¾¿ã€æ— å…¼å®¹é—®é¢˜ï¼ŒåŠ£åŠ¿åœ¨äºå¯¹äºå­—æ¯ã€æ•°å­—ã€ä¸­æ–‡ç­‰çš„è§†è§‰æ•ˆæœæœ‰ä¸ä¸€è‡´ã€‚

ç²—ç‡¥åœºæ™¯é€‚ç”¨ã€‚

##### å¤„ç†å¤šè¡Œ

JavaScriptæ–¹æ³•å¤„ç†å¤šè¡Œæ–‡æœ¬æº¢å‡ºï¼Œä¹Ÿæ˜¯æœ€è¿‘çœ‹åˆ°ï¼Œ[demo-jsfiddle-multilines-cut](https://jsfiddle.net/James_dengdengdengdeng/vqz3p6co/33/)ã€‚



JavaScriptä»£ç ï¼š

```javascript
const getNumInfo = (value) => +value.slice(0, -2)

//æˆªæ–­å¤šè¡Œæ–‡æœ¬
const truncateMultiLinesText = (selectors, rows = 3, fix = -3) => {
  //å–ç›®æ ‡å…ƒç´ 
  const ele = document.querySelector(selectors);

  //å–éœ€è¦ä¿¡æ¯
  const text = ele.innerText;
  const totalTextLen = text.length;
  const lineWidth = getNumInfo(window.getComputedStyle(ele).width);
  const fontSize = getNumInfo(window.getComputedStyle(ele).fontSize)


  // è®¡ç®—ï¼šå•è¡Œå­—æ•°ã€å¤šè¡Œå­—æ•°
  const strNum = Math.floor(lineWidth / fontSize);
  const totalStrNum = Math.floor(strNum * rows);

  //ç¡®å®šå†…å®¹
  const lastIndex = totalStrNum - totalTextLen;
  let content = (totalTextLen > totalStrNum) ? text.slice(0, lastIndex + fix).concat('...') : text

  ele.innerHTML = content;
}
```



æ ¸å¿ƒæ¯”è¾ƒé€»è¾‘åœ¨è¿™é‡Œï¼šç”¨å…ƒç´ çš„ `width` é™¤ä»¥è¯¥å…ƒç´ ç¯å¢ƒä¸‹çš„ `fontSize` ï¼Œå¾—åˆ°å•è¡Œå­—æ•°ï¼Œæ“ä½œçš„è¿˜æ˜¯`str#length`

```javascript
// è®¡ç®—ï¼šå•è¡Œå­—æ•°ã€å¤šè¡Œå­—æ•°
const strNum = Math.floor(lineWidth / fontSize);
const totalStrNum = Math.floor(strNum * rows);
```



å› ä¸ºè¿˜æ˜¯æœ‰åå·®ï¼Œæˆ‘åœ¨å‡½æ•°æä¾›äº†ä¸€ä¸ª`fix`å‚æ•°ï¼Œå€¼æ˜¯æ•°å­—ï¼Œæ¥è°ƒæ•´æœ€ç»ˆå±•ç¤ºçš„å­—æ•°é•¿åº¦ã€‚



è¿™ä¸ªæ–¹æ³•æ²¡æœ‰å…¼å®¹æ€§çš„çƒ¦æ¼ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™æœ‰**ä¸¤ä¸ªå‰æ**ï¼š

1. å¿…é¡»æ‹¿åˆ°åŒ…è£¹æ–‡æœ¬çš„DOMå…ƒç´ ï¼Œå’Œè¿™ä¸ªDOMå…ƒç´ çš„`width`ã€`fontSize`å±æ€§ï¼›
2. å½“è¿™ä¸ªå…ƒç´ çš„`width`å‘ç”Ÿå˜åŒ–ï¼ˆæ¯”å¦‚100%å®½çš„å…ƒç´ åœ¨æµè§ˆå™¨çª—å£å¤§å°è¢«æ”¹å˜æ—¶å€™ï¼‰ï¼Œå¿…é¡»å»é‡æ–°è°ƒç”¨è®¡ç®—æ–¹æ³•ï¼›



#### cssæ–¹æ³•

##### å¤„ç†å•è¡Œ

ä¸å¿…çŠ¹è±«çš„`text-overflow`ï¼š

```css
.text-truncation--single-line {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
} 
```



ç®€å•ã€å…¼å®¹æ€§å¥½ã€å“åº”å¼æˆªæ–­ï¼Œç›¸å¯¹äºJavaScriptæ–¹æ³•å¤„ç†å•è¡Œçš„ä¼˜åŠ¿æ˜¯ï¼šçœç•¥å·ä½ç½®å®Œç¾æ— ç¼ºï¼



ä½¿ç”¨çš„æ—¶å€™ï¼Œä½œç”¨çš„å…ƒç´ éœ€è¦**å…ƒç´ æœ‰æ¡†å®šçš„`width`å€¼**ï¼ˆç‰¹åˆ«æ˜¯ä½¿ç”¨äº†`span`åŒ…è£¹æ–‡æœ¬ï¼‰

##### å¤„ç†å¤šè¡Œ

é¦–æ¨è¿˜æ˜¯ `line-clamp`ã€‚

æ¯”å¦‚ä¸¤è¡Œæ–‡æœ¬æˆªæ–­ï¼š

```css
.text-truncation--two-lines {
	overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}
```



å¦‚æœä½¿ç”¨äº†cssé¢„å¤„ç†å™¨ï¼Œæ¯”å¦‚lessï¼Œè¿˜å¯ä»¥æå–åˆ°mixinï¼š

```less
.text-truncation--multi-lines(@input) {
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: @input;
  -webkit-box-orient: vertical;
}
```

ä½¿ç”¨å®ƒï¼ä¸‰è¡Œæ–‡æœ¬æº¢å‡ºï¼š

```less
.text-truncation--three-lines {
  .text-truncation--multi-lines(3);
}
```



ä½¿ç”¨çš„æ—¶å€™ï¼Œä½œç”¨çš„å…ƒç´ è¿˜æ˜¯è¦æœ‰æ¡†å®šçš„`width`å€¼ã€‚



è¿™æ–¹æ³•æœ€å¤§çš„é—®é¢˜æ˜¯å…¼å®¹æ€§ï¼š[line-clamp](https://caniuse.com/#search=line-clamp)ã€‚ç°åœ¨æ™®éæ”¯æŒè¿˜å¯ä»¥ï¼Œä½†æ˜¯å¦‚æœæ˜¯éœ€è¦å…¼å®¹ie10ã€ie11çš„æœ‹å‹å°±è¦ç»•é“äº†ã€‚

---

å†æ¥çœ‹çœ‹ç¬¬äºŒç§æ–¹æ³•ï¼Œæœ‰ç‚¹é»‘ç§‘æŠ€ã€‚

[demo-jsffidle-multi-lines](https://jsfiddle.net/James_dengdengdengdeng/vqz3p6co/47/)



æ€æƒ³æ˜¯ç”¨åˆ°äº†`::before`å’Œ`::after`ä¼ªç±»ï¼Œ`::before`æ˜¯...çš„åç¼€ï¼Œ`::after`æ˜¯ç™½çš„é®ç½©ã€‚

å¦‚æœæ–‡æœ¬æ²¡æœ‰æº¢å‡ºï¼Œ`::after`å’Œ`::before`åœ¨åŒä¸€ä¸ªä½ç½®ï¼Œé®ç½©ä¼šæŠŠ...åç¼€ç»™æŒ¡ä½ï¼›

å¦‚æœæ–‡æœ¬æº¢å‡ºï¼Œ`::before`å‡ºç°åœ¨æˆªæ–­æ–‡æœ¬æœ«å°¾ï¼Œè€Œ`::after`ä¼šè½åœ¨è¢«`overflow:hidden`çš„åŒºåŸŸï¼Œä¹Ÿå°±éšè—æ‰äº†ã€‚



å¾ˆå·§å¦™ï¼Œä½†æ˜¯åœ¨è§†è§‰æ•ˆæœä¸Šï¼Œå¯èƒ½éœ€è¦å¾®è°ƒã€‚

å¦‚æœæ²¡æœ‰å…¼å®¹æ€§çš„çƒ¦æ¼ï¼Œè¿˜æ˜¯ç”¨å‰é¢ç¬¬ä¸€ç§æ–¹æ³•ï¼›å¦‚æœç¡®å®éœ€è¦å…¼å®¹ie10ã€ie11ï¼Œè¿˜æ˜¯æ¨èè¿™ä¸ªå¤§äºJavaScripå¤„ç†å¤šè¡Œçš„æ–¹æ³•ã€‚

### è·å–æ·»åŠ ...åç¼€çš„ä¿¡æ¯

å¦‚æœåªè¦æ±‚...è§†è§‰æ•ˆæœçš„ï¼Œåˆ°ä¸Šé¢ğŸ‘†å°±ç»“æŸäº†ã€‚



ä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å†å¾€å‰èµ°èµ°ã€‚

æ¯”å¦‚éœ€è¦é¼ æ ‡æ‚¬æµ®åœ¨æˆªæ–­å¤„ç†åçš„æ–‡æœ¬æ—¶ï¼Œå‡ºç°ä¸€ä¸ªå±•ç¤ºè¯¦æƒ…çš„[tooltip](https://element.eleme.cn/#/zh-CN/component/tooltip)ï¼Œæˆ–è€…æ˜¯æº¢å‡ºçš„æ–‡æœ¬åœ¨é¼ æ ‡æ‚¬æµ®æ—¶ï¼Œå˜æˆä¸€ä¸ªé“¾æ¥æ ·å¼ï¼Œç‚¹å‡»æ‰“å¼€å¼¹çª—å±•ç¤ºè¯¦æƒ…ã€‚

è¿™é‡Œçš„å…³é”®ç‚¹åœ¨äºï¼Œè·å–**æ–‡æœ¬æœ‰æ²¡æœ‰æº¢å‡ºè¿™ä¸ªä¿¡æ¯**ã€‚



ä¸€èˆ¬æ˜¯åœ¨å¤„ç†å•è¡Œæ–‡æœ¬æ—¶ï¼Œæœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œæ‰€ä»¥èŒƒå›´ç¼©å‡åˆ°å¤„ç†å•è¡Œæ–‡æœ¬ã€‚

è€ŒJavaScriptå¤„ç†å•è¡Œæ–‡æœ¬ï¼Œæœ‰æ²¡æœ‰æº¢å‡ºè¿™ä¸ªä¿¡æ¯æœ¬èº«å°±æ˜¯åœ¨JavaScriptä¸­ï¼Œæ¯”è¾ƒå®¹æ˜“è·å–ã€‚è¿™æ ·è§†é‡èšç„¦åˆ°åœ¨CSSæ–¹æ³•å¤„ç†å•è¡Œæ–‡æœ¬æ—¶ï¼Œè·å–è¿™ä¸ªä¿¡æ¯ã€‚

####cssæ–¹æ³•å¤„ç†å•è¡Œæ–‡æœ¬ï¼Œæ–‡æœ¬æ˜¯å¦æº¢å‡º

##### æ–¹æ³•ä¸€ï¼šæ¯”è¾ƒ `scrollWidth` å’Œ `offsetWidth`

æ–¹æ³•å¾ˆç®€å•ï¼š

```javascript
function isEllipsisActive(e) {
     return (e.offsetWidth < e.scrollWidth);
}
```



è¿™é‡Œç§‘æ™®ä¸€ä¸‹`offsetWidth`ã€`clientWidth`ã€`scrollWidth`è¿™å‡ ä¸ªå€¼ã€‚

çœ‹å›¾è¯´è¯ï¼š

- `offsetWidth`å’Œ`offsetHeight`æ„æˆçš„boxï¼ŒåŒ…æ‹¬ contentã€paddingã€borderå’Œæ»šåŠ¨æ¡ï¼›
  - å¦‚æœå…ƒç´ æ˜¯`display:block;box-sizing:content`ï¼ˆä¸”ä¸å«æ»šåŠ¨æ¡ï¼‰ï¼Œé‚£ä¹ˆ`offsetWidth`å€¼èƒ½è®¡ç®—ï¼Œç­‰äº`width`+`padding`ï¼ˆå·¦å³ï¼‰+`border`ï¼ˆå·¦å³ï¼‰ï¼›
- `clientWidth`å’Œ`clientHeight` æ„æˆçš„boxï¼ŒåŒ…æ‹¬ content å’Œ paddingï¼›
- `scrollWidth` å’Œ `scrollHeight` æ„æˆçš„boxï¼ŒåŒ…æ‹¬åŒ…æ‹¬å½“å‰éšè—åœ¨æ»šåŠ¨åŒºåŸŸä¹‹å¤–çš„éƒ¨åˆ†

![æŒ‚åœ¨e.targetä¸Šçš„å„ç§width](/Users/harden_ty/Desktop/typora/å›¾ç‰‡/æŠ€æœ¯/æŒ‚åœ¨e.targetä¸Šçš„å„ç§width.png)



å›è¿‡å¤´æ¥è§£é‡Šä¸€ä¸‹æ¯”è¾ƒå‡½æ•°ï¼š

å¦‚æœå†…å®¹è¿‡é•¿ï¼Œ`scrollWidth` ä¼šåŒ…å«æ»šåŠ¨åŒºåŸŸå¤–çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ¯”`offsetWidth`é•¿ï¼Œä¹Ÿå°±éœ€è¦æ·»åŠ ...åç¼€



##### æ–¹æ³•äºŒï¼šæ‹·è´æ¯”è¾ƒ

å¤§è‡´æ€è·¯ï¼š

- æ‹·è´ä¸€ä»½ç›®æ ‡å…ƒç´ ï¼ˆä¸€èˆ¬é€šè¿‡äº‹ä»¶è·å–ï¼Œ`e.target`ï¼‰ï¼Œè®¾ç½®**å¿…è¦csså±æ€§**ï¼ˆè¿™ä¸€æ­¥å†³å®šæ¯”è¾ƒæ˜¯å¦å…¬æ­£ï¼‰ï¼Œæ·»åŠ åˆ°`body`å…ƒç´ ï¼Œè·å¾—ä¸å—é™åˆ¶ä¸‹çš„`width`ï¼›
- å†å’Œç›®æ ‡å…ƒç´ çš„`width`æ¯”è¾ƒï¼Œå®½åº¦ä¸€è‡´åˆ™æ²¡æœ‰æ·»åŠ ...åç¼€ï¼Œæ‹·è´å…ƒç´ çš„å®½åº¦å¤§åˆ™è¡¨æ˜æ·»åŠ äº†...åç¼€
- è®°å¾—åˆ é™¤æ‹·è´çš„å…ƒç´ 



[demo-jsfiddle-copy](http://jsfiddle.net/James_dengdengdengdeng/L1mydvg0/)

#### è·å–æ–‡æœ¬æ˜¯å¦æº¢å‡ºçš„åç»­æ“ä½œ

è¿™é‡Œè¯´ä¸€è¯´éœ€è¦æœ‰å±•ç¤ºè¯¦æƒ…çš„tooltipã€‚



å¦‚æœä¸€ä¸ªé¡µé¢è¿™æ ·çš„æ–‡æœ¬ä¸æ˜¯å¾ˆå¤šï¼Œç®€å•åœ°ç›´æ¥ç»™æ¯ä¸ªæ–‡æœ¬åŒ…ä¸€å±‚tooltipï¼Œç”¨ä¸Šä¸€èŠ‚è·å–åˆ°çš„æ˜¯å¦æ–‡æœ¬æº¢å‡ºçš„ä¿¡æ¯ ï¼Œå»æ§åˆ¶tooltipçš„éšè—ä¸å¦å³å¯ï¼ˆ`disabled`å±æ€§ï¼‰ï¼›

å¦‚æœä¸€ä¸ªé¡µé¢è¿™æ ·çš„æ–‡æœ¬å¾ˆå¤šï¼Œä¸åˆ†é’çº¢çš‚ç™½ç»™æ¯ä¸ªæ–‡æœ¬åŒ…ä¸€å±‚tooltipï¼Œå¼€é”€æœ‰ç‚¹å¤§ã€‚è¿™æ—¶å€™å¯ä»¥è€ƒè™‘ç”¨JavaScriptç»´æŠ¤ä¸€ä¸ªtooltipï¼Œåœ¨é¼ æ ‡ç§»åˆ°ç›®æ ‡æ–‡æœ¬çš„æ—¶å€™ï¼Œæ›´æ–°tooltipçš„ä½ç½®å’Œå†…å®¹ã€‚

å¯ä»¥å‚è€ƒè¿™ä¸€ç¯‡ï¼š[Plain JavaScript tooltip](https://stackoverflow.com/questions/18359193/plain-javascript-tooltip)ã€‚



### æŠ½å–å¤ç”¨

è€ƒè™‘çš„æ˜¯Vueé¡¹ç›®ä¸‹çš„å¤ç”¨å½¢å¼

#### JavaScriptå¤„ç†å•è¡Œæ–‡æœ¬ 

å¯ä»¥ç®€å•æŠ½å–ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œä¸ºæ–¹ä¾¿ä½¿ç”¨åœ¨å…¨å±€æ³¨å†Œï¼š

```javascript
Vue.filter('textTruncation', (val, len = 25) => {
  const suffix = val.length <= len ? '' : '...'
  return `${val.substring(0, len)}${suffix}`
})
```



ä¹Ÿå¯ä»¥æŠ½ä¸€ä¸ªç»„ä»¶ï¼Œä½¿ç”¨è€…å¯èƒ½éœ€è¦æ›´æ–°`span.single-line__content`æ ·å¼ï¼š

```vue
<template>
  <section class="single-line">
    <el-tooltip :content="content" :placement="placement" :effect="effect" :disabled="disabled">
      <span class="single-line__content">{{ content | textTruncationLocal(contentLength) }}</span>
    </el-tooltip>
  </section>
</template>

<script>
export default {
  name: 'SingleLineTextUseJS',
  filters: {
    textTruncationLocal(val, len) {
      const suffix = val.length <= len ? '' : '...'
      return `${val.substring(0, len)}${suffix}`
    }
  },
  props: {
    content: {
      type: String,
      default:
        'è¿™é‡Œæ˜¯å•è¡Œæ–‡æœ¬æˆªæ–­ï¼šå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ'
    },
    contentLength: {
      type: Number,
      default: 25
    },
    effect: {
      type: String,
      default: 'light'
    },
    placement: {
      type: String,
      default: 'bottom'
    }
  },
  computed: {
    disabled() {
      return this.content <= this.contentLength
    }
  }
}
</script>
```

#### csså¤„ç†å•è¡Œæ–‡æœ¬

è¿™ä¸ª TextOverflow ç»„ä»¶ç”¨csså¤„ç†å•è¡Œæ–‡æœ¬ï¼Œä¸”åœ¨é¼ æ ‡ç§»åˆ°å…ƒç´ æ—¶åˆ¤æ–­æ–‡æœ¬æ˜¯å¦æº¢å‡ºï¼ŒæŠ›å‡ºäº‹ä»¶å‘ŠçŸ¥ä¿¡æ¯ï¼š

```vue
<template>
  <section class="text-overflow" @mouseenter="ifTextOverflow">{{ content }}</section>
</template>

<script>
export default {
  name: 'TextOverflow',
  props: {
    content: {
      type: String,
      default: ''
    }
  },
  methods: {
    ifTextOverflow(e) {
      const target = e.currentTarget
      const ellipsisActive = this.isEllipsisActive(target)

      this.$emit('if-ellipsis', ellipsisActive, {
        content: this.content,
        target
      })
    },
    isEllipsisActive(target) {
      return target.offsetWidth < target.scrollWidth
    }
  }
}
</script>

<style lang="less">
.text-overflow {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
</style>
```



è¿™ä¸ª UseTextOverflow ç»„ä»¶ä½¿ç”¨ TextOverflow ç»„ä»¶ï¼ŒJavaScriptç»´æŠ¤ä¸€ä¸ªtooltipï¼Œå‡ºç°åœ¨æ­£ç¡®çš„ä½ç½®ï¼š

- è¿™é‡Œä½¿ç”¨ mouseleave äº‹ä»¶å’Œ TextOverflow ç»„ä»¶ä½¿ç”¨ mouseenter äº‹ä»¶ï¼Œå› ä¸ºä¸éœ€è¦å†’æ³¡

```vue
<template>
  <section class="use-box">
    <section @mouseleave="closeTooltip">
      <TextOverflow :content="value1" @if-ellipsis="handleEllipsisActive"></TextOverflow>
    </section>
    <section @mouseleave="closeTooltip">
      <TextOverflow :content="value2" @if-ellipsis="handleEllipsisActive"></TextOverflow>
    </section>

    <section :style="styleObject" class="tooltip__popper--light" @mouseleave="closeTooltip">
      {{ tooltipText }}
    </section>
  </section>
</template>

<script>
import TextOverflow from '../../../resource/TextOverflow'

export default {
  name: 'UseTextOverflow',
  components: {
    TextOverflow
  },
  data() {
    return {
      value1:
        'è¿™é‡Œæ˜¯csså•è¡Œæ–‡æœ¬æˆªæ–­ï¼šæ‚¬æµ®æŸ¥çœ‹æ˜¯å¦æ–‡æœ¬æº¢å‡ºå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ',
      value2: 'è¿™é‡Œæ˜¯csså•è¡Œæ–‡æœ¬æˆªæ–­ï¼šæ‚¬æµ®æŸ¥çœ‹æ˜¯å¦æ–‡æœ¬æº¢å‡º',
      tooltipText: '',
      styleObject: {
        display: 'none'
      }
    }
  },
  methods: {
    handleEllipsisActive(ellipsisActive, info) {
      if (!ellipsisActive) return

      this.openTooltip(info)
    },
    //æ‰“å¼€tooltip
    openTooltip({ content, target }) {
      this.styleObject.display = 'block'
      this.styleObject.top = `${target.offsetTop + 25}px`
      this.styleObject.left = `${target.offsetLeft - 5}px`
      this.tooltipText = content
    },
    //å…³é—­tooltip
    closeTooltip(e) {
      if (this.ifToTooltip(e.toElement)) return
      this.styleObject.display = 'none'
      this.tooltipText = ''
    },
    ifToTooltip(element) {
      return element.className === 'tooltip__popper--light'
    }
  }
}
</script>

<style lang="less">
.use-box {
  width: 400px;
  border: 1px solid black;
  .tooltip__popper--light {
    position: absolute;
    border-radius: 4px;
    padding: 10px;
    z-index: 2000;
    font-size: 12px;
    line-height: 1.2;
    min-width: 10px;
    word-wrap: break-word;

    background: #fff;
    border: 1px solid #303133;

    &::before {
      content: '';
      position: absolute;
      top: -16px;
      left: calc(~'50% - 6px');
      border: 8px solid transparent;
      border-bottom-color: #303133;
    }
    &::after {
      content: '';
      position: absolute;
      top: -17px;
      left: calc(~'50% - 8px');
      border: 10px solid transparent;
      border-bottom-color: #fff;
    }
  }
}
</style>
```



### æœªå®Œå¾…ç ”ç©¶

- [ ] å¤„ç†å¤šè¡Œæ–‡æœ¬æƒ…å†µï¼Œå¦‚ä½•å–æ·»åŠ ...åç¼€çš„ä¿¡æ¯ï¼Œå¦‚ä½•æŠ½å–å¤ç”¨

- [ ] `clientWidth`ã€`scrollWidth`ã€`offsetWidth`å’Œæ»šåŠ¨æ¡çš„å…³ç³»

  

### å‚è€ƒé“¾æ¥

- [stackoverflow-Understanding offsetWidth, clientWidth, scrollWidth and -Height, respectively](https://stackoverflow.com/questions/21064101/understanding-offsetwidth-clientwidth-scrollwidth-and-height-respectively)
- [stackoverflow-HTML text-overflow ellipsis detection](https://stackoverflow.com/questions/7738117/html-text-overflow-ellipsis-detection)
- [stackoverflow-Plain JavaScript tooltip](https://stackoverflow.com/questions/18359193/plain-javascript-tooltip)
- [æ˜é‡‘-å¯èƒ½æ˜¯æœ€å…¨çš„â€œæ–‡æœ¬æº¢å‡ºæˆªæ–­çœç•¥â€æ–¹æ¡ˆé›†åˆ](https://juejin.im/post/5dc15b35f265da4d432a3d10#heading-13)

